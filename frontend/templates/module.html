<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ submodule.title }} - AI Learning Platform</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body class="module-page">
    <div class="cyber-bg"></div>

    <header class="module-header">
        <a href="/" class="back-button">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10 0L8.59 1.41 15.17 8H0v2h15.17l-6.58 6.59L10 18l10-10z" transform="rotate(180 10 9)"/>
            </svg>
            Back to Courses
        </a>
        <h1 class="module-title">
            <span class="module-number">{{ "%02d"|format(submodule.id) }}</span>
            {{ submodule.title }}
        </h1>
    </header>

    <div class="split-container">
        <!-- Left Panel: AI Assistant -->
        <div class="left-panel">
            <div class="panel-header">
                <h2>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="10" rx="2"/>
                        <circle cx="12" cy="5" r="2"/>
                        <path d="M12 7v4M8 16h.01M12 16h.01M16 16h.01"/>
                    </svg>
                    AI Assistant
                </h2>
                <span class="status-indicator">
                    <span class="pulse"></span>
                    Online
                </span>
            </div>
            
            <div class="chat-container" id="chatContainer">
                <div class="chat-message ai-message">
                    <div class="message-avatar">AI</div>
                    <div class="message-content">
                        <p>Welcome to <strong>{{ submodule.title }}</strong>!</p>
                        <p>I'm here to guide you through this learning experience. Feel free to ask me anything about prompt engineering and AI.</p>
                    </div>
                </div>
            </div>

            <div class="chat-input-container">
                <input type="text" id="chatInput" placeholder="Ask me anything..." autocomplete="off">
                <button id="sendButton" class="send-button">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Right Panel: Interactive Content -->
        <div class="right-panel">
            <div class="panel-header">
                <h2>Interactive Learning Space</h2>
            </div>

            <div class="learning-content">
                {% if submodule.id == 1 %}
                <!-- Submodule 1: Document Upload & Prompting -->
                <div class="instruction-card">
                    <h3>ðŸ“„ Upload a Document</h3>
                    <p>Upload a document (PDF, DOCX, or TXT) and learn how to craft effective prompts to generate better summaries.</p>
                </div>

                <div class="upload-zone" id="uploadZone">
                    <div class="upload-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                        </svg>
                    </div>
                    <p class="upload-text">Drop your document here or <label for="fileInput" class="upload-link">browse</label></p>
                    <p class="upload-hint">Supported: PDF, DOCX, TXT</p>
                    <input type="file" id="fileInput" accept=".pdf,.docx,.txt" style="display: none;">
                </div>

                <div id="documentPreview" class="document-preview" style="display: none;">
                    <h4>Document Preview</h4>
                    <div id="previewContent" class="preview-content"></div>
                </div>

                <div id="promptSection" class="prompt-section" style="display: none;">
                    <h3>ðŸŽ¯ Craft Your Prompt</h3>
                    <p class="hint">Try different prompts to see how the AI responds. Start with a basic request, then refine it!</p>
                    
                    <div class="prompt-examples">
                        <button class="example-btn" data-prompt="Summarize this document.">Basic Prompt</button>
                        <button class="example-btn" data-prompt="Provide a comprehensive summary of this document, highlighting the key points, main arguments, and conclusions.">Detailed Prompt</button>
                        <button class="example-btn" data-prompt="Analyze this document and provide: 1) A brief summary, 2) Key takeaways, 3) Important quotes or data points.">Structured Prompt</button>
                    </div>

                    <textarea id="promptInput" placeholder="Enter your prompt here..." rows="4"></textarea>
                    <button id="generateButton" class="primary-button">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        Generate Summary
                    </button>

                    <div id="summaryOutput" class="summary-output" style="display: none;">
                        <h4>AI-Generated Summary</h4>
                        <div id="summaryContent" class="summary-content"></div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/module.js') }}"></script>
</body>
</html>
